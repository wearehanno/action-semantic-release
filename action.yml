name: 'action-semantic-release'

inputs:
  branches:
    description: 'Which branch to create the release from'
    required: false
    default: 'main'

runs:
  using: 'composite'
  steps:
    - run: |
        yarn add \
          @semantic-release/changelog \
          @semantic-release/commit-analyzer \
          @semantic-release/github \
          @semantic-release/npm \
          @semantic-release/release-notes-generator
      shell: bash
    - run: |
        npx semantic-release \
          --extends ${{ github.action_path }}/release-config.js \
          --branches ${{ inputs.branches }} \
      shell: bash
      env:
        GITHUB_TOKEN: ${{ env.GITHUB_TOKEN }}
